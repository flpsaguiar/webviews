/* eslint-disable */
(function() {

	'use strict';

	angular
		.module('stocksApp', [

			/* Vendors Modules
			============================================================================= */
			'ui.router',

			/* General Modules
			============================================================================= */
			'stocksApp.search',
			'stocksApp.stock',

		]);
})();

(function () { 
 return angular.module("stocksApp")
.constant("CONFIG", {
  "API": "http://localhost:3000"
});

})();

/* eslint-disable */
(function(){

	angular.module('stocksApp.directives', [

	]);

})();

/* eslint-disable */
(function() {

	'use strict';

	angular
		.module('stocksApp.search', []);
})();

/* eslint-disable */
(function() {

	'use strict';

	angular
		.module('stocksApp.stock', []);
})();

/* eslint-disable */
(function() {

	'use strict';

	angular
		.module('stocksApp')
		.config(_configHttpProvider);

	function _configHttpProvider() {

	}

})();

/* eslint-disable */
(function() {

	'use strict';

	angular
		.module('stocksApp')
		.config(routes);

	routes.$inject = [
		'$stateProvider',
		'$urlRouterProvider',
	];

	function routes($stateProvider, $urlRouterProvider) {

		///////////// Redirects and Otherwise
		$urlRouterProvider
			.otherwise('/');

		///////////// State Configurations
		$stateProvider

		/* ==========================================================================
		= Index
		============================================================================= */
			.state('stock', {
				url: '/:id',
				templateUrl: 'templates/stock.html',
				controller: 'StockController as vm'
			})

			.state('search', {
				url: '/',
				templateUrl: 'templates/search.html',
				controller: 'SearchController as vm'
			});
	}
})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp')
		.controller('MainController', MainController);

	MainController.$inject = [
		'MainService',
		'$rootScope',
		'$window',
		'$state',
		'$timeout'
	];

	function MainController(MainService, $rootScope, $window, $state, $timeout) {
		var vm = this;

		console.log('init MainController >>>>');

		///////////// Public Properties
		$rootScope.$state = $state;

		///////////// Private Properties

		///////////// Public Methods

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap
		_init();

		///////////// Function Declarations
		function _init() {

		}

	}

})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp')
		.service('MainService', MainService);

	MainService.$inject = [
		'$http',
		'CONFIG'
	];

	function MainService($http, CONFIG) {
		var self = this;

		console.log('init MainService >>>>');

		///////////// Public Properties

		///////////// Private Properties

		///////////// Public Methods

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap

		///////////// Function Declarations

	}

})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp.search')
		.controller('SearchController', SearchController);

	SearchController.$inject = [
		'$state'
	];

	function SearchController($state) {
		var vm = this;

		console.log('init SearchController >>>>');

		///////////// Public Properties

		///////////// Private Properties

		///////////// Public Methods
		vm.search = _search;

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap
		_init();

		///////////// Function Declarations
		function _init() {

		}

		function _search(e) {
			$state.go('stock', { id: vm.stockCode || 'PETR4' })
		}
	}

})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp.search')
		.service('SearchService', SearchService);

	SearchService.$inject = [
		'$http',
		'CONFIG'
	];

	function SearchService($http, CONFIG) {
		var self = this;

		console.log('init SearchService >>>>');

		///////////// Public Properties

		///////////// Private Properties

		///////////// Public Methods

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap

		///////////// Function Declarations

	}

})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp.stock')
		.controller('StockController', StockController);

	StockController.$inject = [
		'StockService',
		'$state'
	];

	function StockController(StockService, $state) {
		var vm = this;

		console.log('init StockController >>>>');

		///////////// Public Properties
		vm.stockData = {};

		///////////// Private Properties

		///////////// Public Methods

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap
		_init();

		///////////// Function Declarations
		function _init() {
			_getStockData();
		}

		function _getStockData() {
			console.log('getStockData', $state.params.id);
			StockService
				.getStockData($state.params.id)
				.then(function() {
					console.log('THEN');
					if(StockService.stockData) {
						vm.stockData = StockService.stockData;

						console.log(vm.stockData);
					}
				});
		}


	}

})();

/* eslint-disable */
(function(){

	angular
		.module('stocksApp.stock')
		.service('StockService', StockService);

	StockService.$inject = [
		'$http',
		'CONFIG'
	];

	function StockService($http, CONFIG) {
		var self = this;

		console.log('init StockService >>>>');

		///////////// Public Properties

		///////////// Private Properties

		///////////// Public Methods
		self.getStockData = _getStockData;

		///////////// Private Methods

		///////////// Events

		///////////// Bootstrap

		///////////// Function Declarations
		function _getStockData(stockCode) {
			return $http
				.get(CONFIG.API + '/acoes/' + stockCode)
				.then(function(payload) {
					console.log('DONE >>>', payload);
					self.stockData = payload.data;
				});
		}

	}

})();
